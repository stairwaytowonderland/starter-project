{
	"name": "VSCode Dev Container",
	"image": "ghcr.io/stairwaytowonderland/starter-project-devcontainer:latest",
	// "build": {
	// 	"dockerfile": "./docker/Dockerfile",
	// 	"target": "devcontainer",
	// 	"context": "..",
	// 	"args": {
	// 		// "VARIANT": "latest",
	// 		"USERNAME": "vscode",
	// 		"USER_UID": "1000",
	// 		"USER_GID": "1000",
	// 		"TIMEZONE": "America/Chicago",
	// 		"PYTHON_VERSION": "devcontainer"
	// 	}
	// },
	// Comment out to connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root
	"remoteUser": "vscode",

	// Mount the workspace folder
	// https://code.visualstudio.com/remote/advancedcontainers/change-default-source-mount
	// If remoteUser is commented out to use root, use /root instead of /home/vscode
	"workspaceFolder": "/home/vscode/workspace",
	"workspaceMount": "source=${localWorkspaceFolder},target=/home/vscode/workspace,type=bind,consistency=cached",
	// Mount SSH keys
	"mounts": [
		"source=${localEnv:HOME}/.ssh,target=/home/vscode/.ssh,type=bind,consistency=cached",
		"source=${localEnv:HOME}/.gitconfig,target=/etc/gitconfig,type=bind,consistency=cached"
	],

	// Features to install
	// https://containers.dev/features
	"features": {
		// Essential features
		// Use "none" for common-utils username to skip creating a non-root user if user is already created in Dockerfile
		"ghcr.io/devcontainers/features/common-utils:2": {
			"username": "none"
		},

		// Language features
		"ghcr.io/devcontainers/features/node:1": {
			"version": "lts"
		},
		// Use "os-provided" to use the OS package manager version of Python, "latest", or specify a version like "3.12"
		// The "os-provided" version will likely be an older version of Python
		// (e.g. Python 3.11 on Debian 12 or Python 3.12 on Debian 13)
		"ghcr.io/devcontainers/features/python:1": {
			"version": "os-provided",
			"installTools": "true"
		},
		"ghcr.io/devcontainers/features/terraform:1": {
			"version": "1.4.5"
		},

		// Linting and formatting features
		"ghcr.io/devcontainers-extra/features/prettier": {},
		"ghcr.io/devcontainers-extra/features/pylint": {},
		"ghcr.io/devcontainers-extra/features/black": {},
		"ghcr.io/devcontainers-extra/features/isort": {},
		"ghcr.io/devcontainers-extra/features/pre-commit:2": {}

		// The following features are commented out for faster builds, but can be enabled if needed
		// ---------------------------------------
		// Container features
		// (docker-in-docker not yet supported on debian:trixie (use 'debian:bookworm' or 'ubuntu-24.04'))
		// "ghcr.io/devcontainers/features/docker-in-docker": {},
		// Cloud features
		// "ghcr.io/devcontainers/features/aws-cli:1": {},
		// "ghcr.io/devcontainers/features/azure-cli:1": {},
		// "ghcr.io/devcontainers/features/gcloud-cli:1": {},
		// Additional features
		// "ghcr.io/devcontainers/features/github-cli": {},
		// (glab CLI is not yet available for debian:trixie)
		// "ghcr.io/devcontainers/features/glab-cli": {},
		// ---------------------------------------
	},

	// Use 'postCreateCommand' to run commands after the container is created (overrides the CMD in Dockerfile)
	"postCreateCommand": "git --version && python3 --version && printf \"NodeJs \" && node --version && printf \"npm \" && npm --version && printf \"%s@%s:%s\n\" $(whoami) $(hostname) $(pwd)",

	// Use 'forwardPorts' to make a list of ports inside the container available locally
	"forwardPorts": [],

	// Set container-specific environment variables
	"remoteEnv": {
		"PATH": "/home/linuxbrew/.linuxbrew/bin:${containerEnv:PATH}"
	},

	// Configure tool-specific properties
	"customizations": {
		"vscode": {
			// VSCode extensions from Brewfile
			"extensions": [
				// ---------------------------------------
				// Cloud and Docker extensions are commented out for faster builds, but can be enabled if needed
				// ---------------------------------------
				// "AmazonWebServices.aws-toolkit-vscode",
				// "aws-scripting-guy.cform",
				// "formulahendry.docker-explorer",
				// "kddejong.vscode-cfn-lint",
				// "ms-azuretools.vscode-docker",
				// ---------------------------------------
				// Markdown extensions are commented out for faster builds, but can be enabled if needed
				// ---------------------------------------
				// "bierner.github-markdown-preview",
				// "bierner.markdown-checkbox",
				// "bierner.markdown-emoji",
				// "bierner.markdown-footnotes",
				// "bierner.markdown-mermaid",
				// "bierner.markdown-preview-github-styles",
				// "bierner.markdown-yaml-preamble",
				// "bpruitt-goddard.mermaid-markdown-syntax-highlighting",
				// "streetsidesoftware.code-spell-checker",
				// "tomasdahlqvist.markdown-admonitions",
				// "yahyabatulu.vscode-markdown-alert",
				// ---------------------------------------
				// Non-essential extensions are commented out for faster builds, but can be enabled if needed
				// ---------------------------------------
				// "github.vscode-github-actions",
				// "mechatroner.rainbow-csv",
				// "mhutchie.git-graph",
				// "ms-vscode-remote.remote-ssh",
				// "ms-vscode-remote.remote-ssh-edit",
				// "ms-vscode.remote-explorer",
				// ---------------------------------------
				"dbaeumer.vscode-eslint",
				"editorconfig.editorconfig",
				"esbenp.prettier-vscode",
				"hashicorp.terraform", // Formatting for Terraform files
				"ms-azuretools.vscode-containers", // Formatting for Dockerfiles
				"ms-python.black-formatter",
				"ms-python.isort",
				"ms-python.pylint",
				"ms-python.python",
				"ms-python.vscode-pylance",
				"ms-python.vscode-python-envs",
				"samuelcolvin.jinjahtml",
				"redhat.vscode-yaml",
				"rodolphebarbanneau.python-docstring-highlighter",
				"tamasfe.even-better-toml"
			],

			// VSCode settings from .vscode/settings.json
			"settings": {
				"terminal.integrated.defaultProfile.linux": "bash",
				"python.defaultInterpreterPath": "/usr/bin/python3",
				"editor.formatOnType": true,
				"editor.formatOnSave": true,
				"editor.formatOnPaste": false,
				"editor.defaultFormatter": "esbenp.prettier-vscode",
				"editor.detectIndentation": false,
				"editor.tabSize": 4,
				"prettier.useEditorConfig": true,
				"prettier.configPath": ".prettierrc",
				"files.eol": "\n",
				"files.encoding": "utf8",
				"files.trimTrailingWhitespace": true,
				"files.insertFinalNewline": true,
				"files.associations": {
					"*.Brewfile": "ruby",
					"*.cron": "shellscript",
					"*.lib": "shellscript",
					"*yaml.tftpl": "jinja-yaml",
					"*json.tftpl": "jinja-json"
				},
				"[yaml]": {
					"editor.defaultFormatter": "redhat.vscode-yaml",
					"editor.formatOnSave": true
				},
				"[terraform]": {
					"editor.defaultFormatter": "hashicorp.terraform",
					"editor.formatOnSave": true,
					"editor.tabSize": 2
				},
				"[terraform-vars]": {
					"editor.defaultFormatter": "hashicorp.terraform",
					"editor.formatOnSave": true,
					"editor.tabSize": 2
				},
				"[toml]": {
					"editor.defaultFormatter": "tamasfe.even-better-toml",
					"editor.formatOnSave": true
				},
				"[dockerfile]": {
					"editor.defaultFormatter": "ms-azuretools.vscode-containers",
					"editor.formatOnSave": false
				},
				"black-formatter.args": ["--config", "${workspaceFolder}/pyproject.toml"],
				"isort.args": ["--profile", "black"],
				"[python]": {
					// Editorconfig settings will override these settings
					"editor.defaultFormatter": "ms-python.black-formatter",
					"editor.formatOnSave": true,
					"editor.codeActionsOnSave": {
						"source.organizeImports": "explicit"
					}
				},
				"yaml.customTags": [
					"!reference sequence",
					// CloudFormation custom tags
					// https://github.com/redhat-developer/vscode-yaml/issues/669
					"!And sequence",
					"!And",
					"!Base64 scalar",
					"!Base64",
					"!Cidr sequence",
					"!Cidr",
					"!Condition",
					"!Condition scalar",
					"!Equals sequence",
					"!Equals",
					"!FindInMap sequence",
					"!FindInMap",
					"!GetAtt",
					"!GetAtt scalar",
					"!GetAZs",
					"!GetAZs scalar",
					"!If sequence",
					"!If",
					"!ImportValue",
					"!ImportValue scalar",
					"!Join sequence",
					"!Join",
					"!Not sequence",
					"!Not",
					"!Or sequence",
					"!Or",
					"!Ref",
					"!Ref scalar",
					"!Select sequence",
					"!Select",
					"!Split sequence",
					"!Split",
					"!Sub sequence",
					"!Sub",
					"!Transform sequence",
					"!Transform",
					"!ValueOf",
					"!ValueOf scalar",
					"!ImportNoChecks",
					"!ImportNoChecks scalar"
					// Add any other CloudFormation intrinsic functions you use
				]
			}
		}
	}
}
